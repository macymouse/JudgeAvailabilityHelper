<!DOCTYPE html>
<html lang='en'>
<head>
  <title>VEX Interview Availability</title>
  <meta charset='utf-8'>
  <link rel='stylesheet' href='./style.css'>
  <script src='./script.js'></script>
  <link rel="icon" href="./logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Varela Round -->
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <header>
        <h1>VEX Interview Availability</h1>
    </header>

    <form id="loginForm" onsubmit="event.preventDefault()">
        <input type="text" id="formValueId" name="valueId"/>
        <input type="button" onclick="login(this.form.valueId.value)" value="login"/>
    </form>

    <main id="main" style="display:none">

        <!-- GENERATE THIS -->
        <!-- <div id="collapse-box">
            <button type="button" class="collapsible">+ Pick Event Division</button>
            <div class="content">
                <input type="checkbox" id="event1" name="event1" value="V5-1" onchange="handleEventChange(this)">
                <label for="event1">V5 Division 1</label><br>
                <input type="checkbox" id="event2" name="event2" value="V5-2" onchange="handleEventChange(this)">
                <label for="event2">V5 Division 2</label><br>
                <input type="checkbox" id="event3" name="event3" value="IQ-1" onchange="handleEventChange(this)">
                <label for="event3">IQ Division 1</label><br>
                <input type="checkbox" id="event4" name="event4" value="IQ-2" onchange="handleEventChange(this)">
                <label for="event4">IQ Division 2</label><br>

            </div>
        </div> -->

        <!-- GENERATE THIS -->
        <!-- <div class="grid-container">
            <div class="grid-row">
                <div class="grid-item grid-header">Divison</div>
                <div class="grid-item grid-header">Team</div>
                <div class="grid-item grid-header">Status</div>
                <div class="grid-item grid-header">Next Match</div>
            </div>
            
            <div class="grid-row divion">
                <div class="grid-item">tres</div>
                <div class="grid-item">tres</div>
                <div class="grid-item countdown" data-endtime="2025-11-22T22:30:00">tres</div>
                <div class="grid-item countdown" data-endtime="2025-11-22T22:00:00">tres</div>
            </div>
        </div> -->

        <!-- <table>
            <tr>
                <th>Team</th>
                <th>Status</th>
                <th>Next Match</th>
                <th>Done</th>
            </tr>
            <tr>
                <td>3477D</td>
                <td>AVAILABLE</td>
                <td id="timer">12:35</td>
                <td><input type="checkbox" value="3477D"></td>
             </tr>
        </table> -->
    </main>

    <footer>
        <span id="discordtag">project by <a href="https://www.linkedin.com/in/macy-regan/" target="_blank">macymouse</a></span>
    </footer>


    <script>checkCookie();</script>
    <!-- timer THIS IS WRONG AND GPT -->
    <script>
        const times = ["1:13am", "1:16am", "1:35am"]; // your list of target times
        const timerElement = document.getElementById('timer');

        let index = 0;
        let interval;

        function parseTime(timeStr) {
        const match = timeStr.match(/(\d+):(\d+)(am|pm)/i);
        if (!match) return null;

        let [_, hour, minute, period] = match;
        hour = parseInt(hour);
        minute = parseInt(minute);

        if (period.toLowerCase() === 'pm' && hour < 12) hour += 12;
        if (period.toLowerCase() === 'am' && hour === 12) hour = 0;

        const now = new Date();
        const target = new Date(now);
        target.setHours(hour, minute, 0, 0);

        // if time already passed today, set it for tomorrow
        if (target < now) target.setDate(target.getDate() + 1);

        return target;
        }

        function startCountdown() {
        if (index >= times.length) {
            timerElement.textContent = "-";
            clearInterval(interval);
            return;
        }

        const target = parseTime(times[index]);
        if (!target) return;

        clearInterval(interval);
        interval = setInterval(() => {
            const now = new Date();
            const diff = target - now;
            const totalSeconds = Math.floor(diff / 1000);

            if (totalSeconds <= 0) {
            index++; // move to next time
            startCountdown(); // start next countdown
            return;
            }

            const mins = Math.floor(totalSeconds / 60);
            const secs = totalSeconds % 60;
            timerElement.textContent = 
            `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }, 1000);
        }

        startCountdown();
    </script>
</body>
</html>